#include <Arduino.h>

int pir = GPIO_NUM_36;
int led = GPIO_NUM_25;
int mic_digital = GPIO_NUM_26;
int mic_analog = GPIO_NUM_12;
int motionStateCurrent  = LOW; // current  state of motion sensor's pin


void setup() {
  pinMode(mic_digital, INPUT); // set KY-037 pin to input mode
  pinMode(pir, INPUT); // set ESP32 pin to input mode
  pinMode(led, OUTPUT); // set ESP32 pin to output mode
  Serial.begin(9600); // initialize serial
}

void loop() {
  //motionStatePrevious = motionStateCurrent; // store old state
  int d_val;    
  float a_val; 
  d_val = digitalRead(mic_digital); 

  Serial.println(d_val);

  


  a_val = (float)analogRead(mic_analog) / 1024.0f * 5.0f;
  Serial.println(a_val);     

  if(a_val > 2.10){
    digitalWrite(led, HIGH);
  }
  else {
    digitalWrite(led, LOW);
  }

  // motionStateCurrent  = digitalRead(pir); // read new state

  // if (motionStateCurrent == HIGH){
  //   Serial.println("Motion detected! LED is on!");
  //   digitalWrite(led, HIGH);
  // } else {
  //   Serial.println("Motion not detected, LED is ");
  //   digitalWrite(led, LOW);
  // }
  delay(500);

}
